#!/bin/sh

file="$HOME/Pictures/screenshots/"$(date | sed  "s/\s/_/g")".png"

if ! [ -d $HOME/Pictures/screenshots ]; then
    mkdir -p $HOME/Pictures/screenshots;
fi

case $XDG_SESSION_TYPE in
    "wayland")
        case $1 in
            "select")
                dim=$(slurp)
                grim -g "${dim}" $file && notify-send "saved screenshot to $file"
                grim -g "${dim}" -t png - | wl-copy
                ;;
            *)
                grim $file && notify-send "saved screenshot to $file"
                ;;
        esac
        ;;
    *)
        case $1 in
            "select")
                dim=$(slop)
                maim -g "${dim}" $file && notify-send "saved screenshot to $file"
                maim -g "${dim}" -t png - | wl-copy
                ;;
            *)
                maim $file && notify-send "saved screenshot to $file"
                ;;
        esac
        ;;
esac
